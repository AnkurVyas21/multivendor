
<div *ngIf="data.type=='addcar'">
  <div style="text-align: center;">
    <h2 mat-dialog-title>Enter Car Details</h2>
</div>

<form [formGroup]="carForm" (ngSubmit)="onSubmit()">  
  <mat-form-field>  
    <mat-label>Car Name</mat-label>  
    <input matInput formControlName="carName" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Car Price</mat-label>  
    <input matInput type="number" formControlName="carPrice" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Car Make</mat-label>  
    <input matInput formControlName="carMake" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Model</mat-label>  
    <input matInput formControlName="model" required>  
  </mat-form-field>  
  
  <mat-form-field>  
    <mat-label>Body</mat-label>  
    <input matInput formControlName="body" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Car Description</mat-label>  
    <textarea matInput formControlName="description"></textarea>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Condition</mat-label>  
    <mat-select formControlName="condition">  
      <mat-option *ngFor="let option of conditions" [value]="option">{{ option }}</mat-option>  
    </mat-select>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Cylinders</mat-label>  
    <mat-select formControlName="cylinders">  
      <mat-option *ngFor="let cylinder of cylinderOptions" [value]="cylinder">{{ cylinder }}</mat-option>  
    </mat-select>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Stock Number</mat-label>  
    <input matInput formControlName="stockNumber" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Fuel Type</mat-label>  
    <mat-select formControlName="fuelType">  
      <mat-option *ngFor="let fuel of fuelTypes" [value]="fuel">{{ fuel }}</mat-option>  
    </mat-select>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>VIN Number</mat-label>  
    <input matInput formControlName="vin" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Doors</mat-label>  
    <mat-select formControlName="doors">  
      <mat-option *ngFor="let door of doorOptions" [value]="door">{{ door }}</mat-option>  
    </mat-select>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Year</mat-label>  
    <input matInput type="number" formControlName="year" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Color</mat-label>  
    <input matInput formControlName="color" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Mileage</mat-label>  
    <input matInput formControlName="mileage" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Seats</mat-label>  
    <input matInput type="number" formControlName="seats" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Transmission</mat-label>  
    <mat-select formControlName="transmission">  
      <mat-option *ngFor="let type of transmissionTypes" [value]="type">{{ type }}</mat-option>  
    </mat-select>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>City MPG</mat-label>  
    <input matInput formControlName="cityMPG" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Engine Size</mat-label>  
    <input matInput formControlName="engineSize" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Highway MPG</mat-label>  
    <input matInput formControlName="highwayMPG" required>  
  </mat-form-field>  

  <mat-form-field>  
    <mat-label>Driver Type</mat-label>  
    <mat-select formControlName="driverType">  
      <mat-option *ngFor="let type of driverTypes" [value]="type">{{ type }}</mat-option>  
    </mat-select>  
  </mat-form-field>  

  <div>
    <mat-label>Upload Images</mat-label>
    <input type="file" (change)="onFileChange($event)" multiple accept="image/*">
  </div>
  
  <div class="image-preview-container" *ngIf="selectedImages.length > 0">
    <div class="image-preview" *ngFor="let image of selectedImages; let i = index">
      <img  [src]="image" alt="Selected image" />
      <button class="delete-button" (click)="deleteImage(i)">&#x2715;</button>
    </div>
  </div>
  
  <h3>Features</h3>  
<div formGroupName="features">  
  <h4>Safety Features</h4>  
  <div formGroupName="safety">  
    <div *ngFor="let safetyFeature of safetyFeatures">  
      <mat-checkbox formControlName="{{safetyFeature.control}}">{{safetyFeature.name}}</mat-checkbox>  
    </div>  
  </div>  

  <h4>Exterior Features</h4>  
  <div formGroupName="exterior">  
    <div *ngFor="let exteriorFeature of exteriorFeatures">  
      <mat-checkbox formControlName="{{exteriorFeature.control}}">{{exteriorFeature.name}}</mat-checkbox>  
    </div>  
  </div>  

  <h4>Interior Features</h4>  
  <div formGroupName="interior">  
    <div *ngFor="let interiorFeature of interiorFeatures">  
      <mat-checkbox formControlName="{{interiorFeature.control}}">{{interiorFeature.name}}</mat-checkbox>  
    </div>  
  </div>  

  <h4>Convenience Features</h4>  
  <div formGroupName="convenience">  
    <div *ngFor="let convenienceFeature of convenienceFeatures">  
      <mat-checkbox formControlName="{{convenienceFeature.control}}">{{convenienceFeature.name}}</mat-checkbox>  
    </div>  
  </div>  
</div>

  <button mat-raised-button type="submit" [disabled]="carForm.invalid">Submit</button>  
</form>  
</div>

<div *ngIf="data.type=='updateBanner'">
  <h2 class="text-center">Update Banners</h2>

  <div class="container mt-4">
    <div class="row">
      <!-- Banner 1 -->
      <div class="col-md-6">
        <div class="mb-3 text-center">
          <label for="banner1" class="form-label">Banner 1</label>
          <img  [src]="banner1" alt="Banner 1" class="img-thumbnail" width="200">
          <input type="file" id="banner1" class="form-control mt-2" (change)="onImageChange($event, 1)">
        </div>
      </div>
  
      <!-- Banner 2 -->
      <div class="col-md-6">
        <div class="mb-3 text-center">
          <label for="banner2" class="form-label">Banner 2</label>
          <img  [src]="banner2" alt="Banner 2" class="img-thumbnail" width="200">
          <input type="file" id="banner2" class="form-control mt-2" (change)="onImageChange($event, 2)">
        </div>
      </div>
    </div>
  
    <!-- Save and Close buttons -->
    <div class="text-center mt-4">
      <button class="btn btn-success me-2" data-bs-dismiss="modal">Save Changes</button>
      <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    </div>
  </div>
  
</div>

<div *ngIf="data.type=='updateCommission'">
  <h2 class="text-center">Update Car Commission</h2>

  <div class="container mt-4">
    <div class="form-group">
      <label for="category">Select Car Category</label>
      <select id="category" class="form-control" [(ngModel)]="selectedCategory">
        <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
      </select>
    </div>
  
    <div class="form-group mt-4">
      <label for="commission">Set Commission (â‚¹)</label>
      <input type="number" id="commission" class="form-control" [(ngModel)]="commission" min="1000">
    </div>
  
    <!-- Save and Close buttons -->
    <div class="text-center mt-4">
      <button class="btn btn-success" (click)="updateCommission()">Save Changes</button>
      <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    </div>
  </div>
  
</div>

<div *ngIf="data.type=='viewCar'">
  <div class="tab-title">
    <h3>{{ carDetails.title + ' - ' + carDetails.make }}</h3>
  </div>
  
  <mat-tab-group [(selectedIndex)]="selectedTabIndex">
    <mat-tab label="Basic Details" >
      <div class="container mt-4" *ngIf="!editView.basic">
        <mat-card class="p-4 shadow-lg rounded">
          <mat-card-title class="text-primary mb-3">Car Details</mat-card-title>
          <mat-divider></mat-divider>
    
          <div class="row mt-4">
            <!-- Left Column -->
            <div class="col-md-6">
              <p><strong class="text-secondary">Title:</strong> <span class="text-dark">{{ carDetails.title }}</span></p>
              <p><strong class="text-secondary">Make:</strong> <span class="text-dark">{{ carDetails.make }}</span></p>
              <p><strong class="text-secondary">Model:</strong> <span class="text-dark">{{ carDetails.model }}</span></p>
              <p><strong class="text-secondary">Type:</strong> <span class="text-dark">{{ carDetails.type }}</span></p>
              <p><strong class="text-secondary">Year:</strong> <span class="text-dark">{{ carDetails.year }}</span></p>
              <p><strong class="text-secondary">Condition:</strong> <span class="badge bg-success">{{ carDetails.condition }}</span></p>
            </div>
    
            <!-- Right Column -->
            <div class="col-md-6">
              <p><strong class="text-secondary">Stock Number:</strong> <span class="text-dark">{{ carDetails.stockNumber }}</span></p>
              <p><strong class="text-secondary">VIN Number:</strong> <span class="text-dark">{{ carDetails.vinNumber }}</span></p>
              <p><strong class="text-secondary">Description:</strong> <span class="text-dark">{{ carDetails.description }}</span></p>
              <p><strong class="text-secondary">Price Label:</strong> 
                <span class="badge" [ngClass]="carDetails.priceLabel ? 'bg-primary' : 'bg-secondary'">
                  {{ carDetails.priceLabel ? 'Yes' : 'No' }}
                </span>
              </p>
              <p><strong class="text-secondary">Regular Price:</strong> <span class="text-dark fw-bold">${{ carDetails.regularPrice }}</span></p>
              <p><strong class="text-secondary">Sale Price:</strong> <span class="text-danger fw-bold">${{ carDetails.salePrice }}</span></p>
              <p><strong class="text-secondary">Request Price:</strong> <span class="text-dark fw-bold">${{ carDetails.requestPrice }}</span></p>
            </div>
          </div>
    
          <mat-divider class="mt-4"></mat-divider>
    
          <div class="d-flex justify-content-end mt-4">
            <button mat-raised-button color="primary" class="px-4 py-2" (click)="editDetails()">Edit Details</button>
          </div>
        </mat-card>
      </div>
      <div *ngIf="editView.basic">
        <form action="/" id="submit-add-cart" class="form-add-cart needs-validation" novalidate="" [formGroup]="carlistingFormBasic" (ngSubmit)="onCarEditFormSubmit(carlistingFormBasic,1)">
          <fieldset id="information" class="pd-bg">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  <span class="sub-title">Basic Details</span>
                  <h3 class="title">Add Basic Details</h3>
              </div>
              <div class="tfad-listing-title mb-30" bis_skin_checked="1">
                  <div class="form-group" bis_skin_checked="1">
                      <label>Listing Title (*)</label>
                      <input type="text" id="listing-title" formControlName="title" class="form-control" name="listing-title" placeholder="Enter title here" value="">
                  </div>
              </div>
              <div class="listing-fields-grid mb-30" bis_skin_checked="1">
                  <div class="form-group" bis_skin_checked="1">
                      <label>Listing Title (*)</label>
                      <div class="group-select" bis_skin_checked="1">
                              <select class="list" formControlName="make">
                                  <option data-value="" class="option selected">BMV</option>
                                  <option data-value="Audi" class="option">Audi</option>
                                  <option data-value="Bentley" class="option">Bentley</option>
                                  <option data-value="Acura" class="option">Acura</option>
                                  <option data-value="Ferrari" class="option">Ferrari</option>
                                  <option data-value="Ford" class="option">Ford</option>
                                  <option data-value="Lexus" class="option">Lexus</option>
                                  <option data-value="Maybach" class="option">Maybach</option>
                                  <option data-value="Mercedes" class="option">Mercedes</option>
                                  <option data-value="Porsche" class="option">Porsche</option>
                                  <option data-value="Toyota" class="option">Toyota</option>
                              </select>
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label> Model (*)</label>
                      <div class="group-select" bis_skin_checked="1">
                          <!-- <div class="nice-select" tabindex="0" bis_skin_checked="1"><span class="current">X5</span> -->
                              <select class="list" formControlName="model">
                                  <option data-value="" class="option selected">X5</option>
                                  <option data-value="3 Series" class="option">3 Series</option>
                                  <option data-value="718 Boxster T" class="option">718 Boxster T</option>
                                  <option data-value="718 Cayman" class="option">718 Cayman</option>
                                  <option data-value="911 Carrera 4" class="option">911 Carrera 4</option>
                                  <option data-value="A4" class="option">A4</option>
                                  <option data-value="Bentayga" class="option">Bentayga</option>
                                  <option data-value="Bentayga Azure" class="option">Bentayga Azure</option>
                                  <option data-value="Bentayga Technology" class="option">Bentayga
                                      Technology</option>
                                  <option data-value="C Class" class="option">C Class</option>
                              </select>
                          <!-- </div> -->
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Type (*)</label>
                      <div class="group-select" bis_skin_checked="1">
                          <!-- <div class="nice-select" tabindex="0" bis_skin_checked="1"><span class="current">Crossover</span> -->
                              <select class="list" formControlName="type">
                                  <option data-value="" class="option selected">Crossover</option>
                                  <option data-value="Crossover" class="option">Compact</option>
                                  <option data-value="Convertible" class="option">Convertible</option>
                                  <option data-value="Crossover" class="option">Crossover</option>
                                  <option data-value="Hatchback" class="option">Hatchback</option>
                                  <option data-value="Sedan" class="option">Sedan</option>
                                  <option data-value="SUV" class="option">SUV</option>
                              </select>
                          </div>
                      <!-- </div> -->
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Years (*)</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="year" type="tel" id="year" value="2022" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Condition</label>
                      <div class="group-select" bis_skin_checked="1">
                          <!-- <div class="nice-select" tabindex="0" bis_skin_checked="1"><span class="current">Used</span> -->
                              <select formControlName="condition" class="list">
                                  <option data-value="" class="option selected">Used</option>
                                  <option data-value="New" class="option">New</option>
                              </select>
                          <!-- </div> -->
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Stock Number</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="stockNumber" type="tel" id="stock-number" placeholder="Enter Number" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>VIN Number</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="vinNumber" type="tel" id="vin-number" placeholder="Enter VIN" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Highway MPG</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="highwayMPG" type="text" id="highway-mpg" placeholder="28" required="">
                      </div>
                  </div>
              </div>
     
              
              <div class="description-fields mb-30" bis_skin_checked="1">
                  <div class="form-group" bis_skin_checked="1">
                      <label>Description</label>
                      <div class="group-select" bis_skin_checked="1">
                          <textarea id="description" formControlName="description" name="Description">                                            </textarea>
                      </div>
                  </div>
              </div>
              <div class="listing-fields-grid mb-30" bis_skin_checked="1">
                  <div class="form-group" bis_skin_checked="1">
                      <label>Request Price Label</label>
                      <div class="group-select" bis_skin_checked="1">
                          <div class="radio" bis_skin_checked="1">
                              <input id="first" type="checkbox" name="numbers" value="first" formControlName="priceLabel">
                              <label for="first">Negotiable</label>
                          </div>
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label> Regular Price *</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input type="number" id="regular-price" formControlName="regularPrice" placeholder="Enter Sale Price" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Sale Price</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input type="number" id="sale-price" formControlName="salePrice" placeholder="Enter Sale Price" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Request Price Label</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input type="number" id="requesr-price " formControlName="requestPrice" placeholder="Enter Sale Price" required="">
                      </div>
                  </div>
              </div>
          </fieldset>
          <fieldset>
              <button type="submit" class="button-save-listing" style="margin-bottom: 25px; float: right">Update Details</button>
          </fieldset>
      </form>
      </div>
    </mat-tab>



    <mat-tab label="Car Specifications" >    
      <div class="container mt-4" *ngIf="!editView.specification">
        <mat-card class="p-4 shadow-lg rounded">
          <mat-card-title class="text-primary mb-3">Car Specifications</mat-card-title>
          <mat-divider></mat-divider>
      
          <div class="row mt-4">
            <!-- Left Column -->
            <div class="col-md-6">
              <p><strong class="text-secondary">Mileage:</strong> <span class="text-dark">{{ carSpecs.mileage }} km</span></p>
              <p><strong class="text-secondary">Transmission:</strong> 
                <span class="badge bg-info">{{ carSpecs.transmission }}</span>
              </p>
              <p><strong class="text-secondary">Driver Type:</strong> <span class="text-dark">{{ carSpecs.driverType }}</span></p>
              <p><strong class="text-secondary">Engine Size:</strong> <span class="text-dark">{{ carSpecs.engineSize }} L</span></p>
              <p><strong class="text-secondary">Cylinders:</strong> <span class="text-dark">{{ carSpecs.cylinders }}</span></p>
              <p><strong class="text-secondary">Fuel Type:</strong> 
                <span class="badge bg-success">{{ carSpecs.fuel }}</span>
              </p>
            </div>
      
            <!-- Right Column -->
            <div class="col-md-6">
              <p><strong class="text-secondary">Doors:</strong> <span class="text-dark">{{ carSpecs.doors }}</span></p>
              <p><strong class="text-secondary">Color:</strong> 
                <span class="badge bg-secondary">{{ carSpecs.color }}</span>
              </p>
              <p><strong class="text-secondary">Seats:</strong> <span class="text-dark">{{ carSpecs.seats }}</span></p>
              <p><strong class="text-secondary">City MPG:</strong> <span class="text-dark fw-bold">{{ carSpecs.cityMPG }} mpg</span></p>
              <p><strong class="text-secondary">Highway MPG:</strong> <span class="text-dark fw-bold">{{ carSpecs.highwayMPG }} mpg</span></p>
            </div>
          </div>
      
          <mat-divider class="mt-4"></mat-divider>
      
          <div class="d-flex justify-content-end mt-4">
            <button mat-raised-button color="primary" class="px-4 py-2" (click)="editSpecifications()">Edit Specifications</button>
          </div>
        </mat-card>
      </div>
      <div *ngIf="editView.specification">
        <form action="/" id="submit-add-cart" class="form-add-cart needs-validation" novalidate="" [formGroup]="carlistingFormSpecification" (ngSubmit)="onCarEditFormSubmit(carlistingFormSpecification,2)">
          <fieldset id="information" class="pd-bg">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  <span class="sub-title">Specification</span>
                  <h3 class="title">Add car's specifications</h3>
              </div>
              <div class="listing-fields-grid mb-30" bis_skin_checked="1">
                  <div class="form-group" bis_skin_checked="1">
                      <label>Mileage</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="mileage" type="number" id="mileage" placeholder="Enter Mileage" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Transmission</label>
                      <div class="group-select" bis_skin_checked="1">
                        
                              <select class="list" formControlName="transmission">
                                  <option data-value="" class="option selected">Manual Transmission</option>
                                  <option data-value="Auto" class="option">Auto</option>
                                  <option data-value="CVT" class="option">CVT</option>
                                  <option data-value="DCT" class="option">DCT</option>
                                  <option data-value="MT" class="option">MT</option>
                              </select>
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Driver Type</label>
                      <div class="group-select" bis_skin_checked="1">
                              <select class="list" formControlName="driverType">
                                  <option data-value="" class="option selected">FWD</option>
                                  <option data-value="2WD" class="option">2WD</option>
                                  <option data-value="3WD" class="option">3WD</option>
                                  <option data-value="4WD" class="option">4WD</option>
                                  <option data-value="WD" class="option">WD</option>
                              </select>
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Engine Size</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="engineSize" type="text" id="engine-size" placeholder="Enter Engine" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Cylinders</label>
                      <div class="group-select" bis_skin_checked="1">
                              <select class="list" formControlName="cylinders">
                                  <option data-value="" class="option selected">1</option>
                                  <option data-value="2" class="option">2</option>
                                  <option data-value="3" class="option">3</option>
                                  <option data-value="4" class="option">4</option>
                                  <option data-value="5" class="option">5</option>
                                  <option data-value="6" class="option">6</option>
                              </select>
                          </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Fuel Type</label>
                      <div class="group-select" bis_skin_checked="1">
                              <select class="list" formControlName="fuel">
                                  <option data-value="" class="option selected">Petrol</option>
                                  <option data-value="Diesel" class="option">Diesel</option>
                                  <option data-value="Electric" class="option">Electric</option>
                                  <option data-value="Gasoline" class="option">Gasoline</option>
                                  <option data-value="Hybrid" class="option">Hybrid</option>
                              </select>
                          </div>
                      <!-- </div> -->
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Doors</label>
                      <div class="group-select" bis_skin_checked="1">
                              <select class="list" formControlName="doors">
                                  <option data-value="" class="option selected">4</option>
                                  <option data-value="2" class="option">2</option>
                              </select>
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Color</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="color" type="text" id="engine-size" placeholder="Enter Color" required="">
                      </div>
              
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Seats</label>
                      <div class="group-select" bis_skin_checked="1">
                              <select class="list" formControlName="seats">
                                  <option data-value="" class="option selected">1</option>
                                  <option data-value="2" class="option">2</option>
                                  <option data-value="3" class="option">3</option>
                                  <option data-value="4" class="option">4</option>
                                  <option data-value="5" class="option">5</option>
                              </select>
                          </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>City MPG</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input  formControlName="cityMPG" type="text" id="city-mpg" placeholder="18" required="">
                      </div>
                  </div>
                  <div class="form-group" bis_skin_checked="1">
                      <label>Highway MPG</label>
                      <div class="group-select" bis_skin_checked="1">
                          <input formControlName="highwayMPG" type="text" id="highway-mpg" placeholder="28" required="">
                      </div>
                  </div>
              </div>
              </fieldset>
              <fieldset>
                  <button type="submit" class="button-save-listing" style="margin-bottom: 25px; float: right">Update Specification</button>
              </fieldset>
          </form>
      </div>
      
      
             </mat-tab>


    <mat-tab label="Car Features" > 
      <div class="container mt-4" *ngIf="!editView.feature">
        <mat-card class="p-4 shadow-lg rounded">
          <mat-card-title class="text-primary mb-3">Car Features</mat-card-title>
          <mat-divider></mat-divider>
      
          <div class="row mt-4">
            <div class="col-md-12 d-flex flex-wrap gap-2">
              <mat-chip *ngFor="let feature of selectedFeatures" color="primary" selected class="feature-chip">
                {{ feature }}
              </mat-chip>
            </div>
          </div>
      
          <mat-divider class="mt-4"></mat-divider>
      
          <div class="d-flex justify-content-end mt-4">
            <button mat-raised-button color="primary" class="px-4 py-2" (click)="editFeatures()">Edit Features</button>
          </div>
        </mat-card>
      </div>

      <div *ngIf="editView.feature">
        <form action="/" id="submit-add-cart" class="form-add-cart needs-validation" novalidate="" [formGroup]="carlistingFormFeature" (ngSubmit)="onCarEditFormSubmit(carlistingFormFeature,3)">
           
          <fieldset id="amenities" class="pd-bg">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  <span class="sub-title">Features</span>
                  <h3 class="title">Select Listing Features</h3>
              </div>
              <div class="tfad-listing-feature" bis_skin_checked="1">
                  <div class="listing-feature-item" bis_skin_checked="1">
                      <div class="form-group" bis_skin_checked="1">
                          <label>Request Price Label</label>
                          <div class="group-select" bis_skin_checked="1">
                              <div class="radio" bis_skin_checked="1">
                                  <input id="front" type="checkbox" name="check" value="check" formControlName="ACFront">
                                  <label for="front">A/C: Front</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="rear" type="checkbox" name="check" value="check"  formControlName="ACRear">
                                  <label for="rear">A/C: Rear</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="camera" type="checkbox" name="check" value="check"  formControlName="backupCamera">
                                  <label for="camera">Backup Camera</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="control" type="checkbox" name="check" value="check"  formControlName="cruiseControl">
                                  <label for="control">Cruise Control</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="navigation" type="checkbox" name="check" value="check"  formControlName="navigation">
                                  <label for="navigation">Navigation</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="locks" type="checkbox" name="check" value="check"  formControlName="powerLocks">
                                  <label for="locks">Power Locks</label>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="listing-feature-item" bis_skin_checked="1">
                      <div class="form-group" bis_skin_checked="1">
                          <label>Entertainment</label>
                          <div class="group-select" bis_skin_checked="1">
                              <div class="radio" bis_skin_checked="1">
                                  <input id="stereo" type="checkbox" name="check" value="check"  formControlName="amfmStereo">
                                  <label for="stereo">AM/FM Stereo</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="cd" type="checkbox" name="check" value="check" formControlName="cdPlayer">
                                  <label for="cd">CD Player</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="dvd" type="checkbox" name="check" value="check" formControlName="dvdSystem">
                                  <label for="dvd">DVD System</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="mp3" type="checkbox" name="check" value="check" formControlName="mp3Player">
                                  <label for="mp3">MP3 Player</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="portable" type="checkbox" name="check" value="check" formControlName="portableAudio">
                                  <label for="portable">Portable Audio</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="premium" type="checkbox" name="check" value="check" formControlName="premiumAudio">
                                  <label for="premium">Premium Audio</label>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="listing-feature-item" bis_skin_checked="1">
                      <div class="form-group" bis_skin_checked="1">
                          <label>Safety</label>
                          <div class="group-select" bis_skin_checked="1">
                              <div class="radio" bis_skin_checked="1">
                                  <input id="driver" type="checkbox" name="check" value="check" formControlName="airbagDriver">
                                  <label for="driver">Airbag: Driver</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="passenger" type="checkbox" name="check" value="check" formControlName="airbagPassenger">
                                  <label for="passenger">Airbag: Passenger</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="brakes" type="checkbox" name="check" value="check" formControlName="antilockBrakes">
                                  <label for="brakes">Antilock Brakes</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="bluetooth" type="checkbox" name="check" value="check" formControlName="bluetooth">
                                  <label for="bluetooth">Bluetooth</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="hands-free" type="checkbox" name="check" value="check" formControlName="handsFree">
                                  <label for="hands-free">Hands-Free</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="fog-lights" type="checkbox" name="check" value="check" formControlName="fogLights">
                                  <label for="fog-lights">Fog Lights</label>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="listing-feature-item" bis_skin_checked="1">
                      <div class="form-group" bis_skin_checked="1">
                          <label>Windows</label>
                          <div class="group-select" bis_skin_checked="1">
                              <div class="radio" bis_skin_checked="1">
                                  <input id="power" type="checkbox" name="check" value="check" formControlName="powerWindows">
                                  <label for="power">Power Windows</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="defroster" type="checkbox" name="check" value="check" formControlName="windowsDefroster">
                                  <label for="defroster">Windows Defroster</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="rear-window" type="checkbox" name="check" value="check" formControlName="rearWindow">
                                  <label for="rear-window">Rear Window</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="wiper-tinted-glass" type="checkbox" name="check" value="check" formControlName="wiperTintedglass">
                                  <label for="wiper-tinted-glass">Wiper Tinted Glass</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="sunroof" type="checkbox" name="check" value="check" formControlName="sunroof">
                                  <label for="sunroof">Sunroof</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="tow-package" type="checkbox" name="check" value="check" formControlName="towPackage">
                                  <label for="tow-package">Tow Package</label>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="listing-feature-item" bis_skin_checked="1">
                      <div class="form-group" bis_skin_checked="1">
                          <label>Seats</label>
                          <div class="group-select" bis_skin_checked="1">
                              <div class="radio" bis_skin_checked="1">
                                  <input id="bucket-seats" type="checkbox" name="check" value="check" formControlName="bucketSeats">
                                  <label for="bucket-seats">Bucket Seats</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="heated-seats" type="checkbox" name="check" value="check" formControlName="heatedSeats">
                                  <label for="heated-seats">Heated Seats</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="leather-interior" type="checkbox" name="check" value="check" formControlName="leatherInterior">
                                  <label for="leather-interior">Leather Interior</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="memory-seats" type="checkbox" name="check" value="check" formControlName="memorySeats">
                                  <label for="memory-seats">Memory Seats</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="power-seats" type="checkbox" name="check" value="check" formControlName="powerSeats">
                                  <label for="power-seats">Power Seats</label>
                              </div>
                              <div class="radio" bis_skin_checked="1">
                                  <input id="third-row-seats" type="checkbox" name="check" value="check" formControlName="thirdRowSeats">
                                  <label for="third-row-seats">Third Row Seats</label>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </fieldset>
      
          <fieldset>
              <button type="submit" class="button-save-listing" style="margin-bottom: 25px; float: right">Update Features </button>
          </fieldset>
      </form>
      </div>
      
      
           </mat-tab>


    <mat-tab label="Car Media Features" >   
      <div class="container mt-4" *ngIf="!editView.media">
        <mat-card class="p-3">
          <mat-card-title>Car Media</mat-card-title>
          <mat-divider></mat-divider>
      
          <div class="row mt-3">
            <div class="col-md-4 col-sm-6" *ngFor="let media of carMedia; let i = index">
              <div class="media-item text-center p-2 border rounded">
                <b>Photo {{ i + 1 }}:</b>
                <img *ngIf="!media.isEditing" [src]="media.photoUrl" class="img-thumbnail car-image">
                
                <input *ngIf="media.isEditing" type="text" [(ngModel)]="media.photoUrl" class="form-control mt-2">
                
                <div class="mt-2">
                  
                  <button mat-button color="accent" *ngIf="media.isEditing" (click)="saveMedia(i)">Save</button>
                </div>
              </div>
            </div>
      
            <div class="col-md-6 mt-3">
              <b>Video:</b>
              <a [href]="videoUrl" target="_blank" class="text-decoration-none text-primary">View Video</a>
            </div>
      
            <div class="col-md-6 mt-3">
              <b>VIN Report:</b>
              <a [href]="vinReportUrl" class="text-decoration-none text-success">Download VIN Report</a>
            </div>
          </div>
          <div class="d-flex justify-content-end mt-4">
            <button mat-raised-button color="primary" class="px-4 py-2" (click)="editMedia()" >Edit Media</button>
          </div>
        </mat-card>
      </div>
      
      <div *ngIf="editView.media">
        <form action="/" id="submit-add-cart" class="form-add-cart needs-validation" novalidate="" [formGroup]="carlistingFormMedia" (ngSubmit)="onCarEditFormSubmit(carlistingFormMedia,4)">
          <fieldset id="upload-media" class="pd-bg">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  <span class="sub-title">Media</span>
                  <h3 class="title">Upload Your Photos</h3>
              </div>
              <div class="upload-image-add-car" bis_skin_checked="1">
                  <div class="upload-image" bis_skin_checked="1">
                      <label for="photoLoad" class="uploadLabel">
                          <i class="icon-Group4"></i>
                          <span>Add a Photo</span>
                          <input type="file"  formControlName="photo1" id="photoLoad" class="photoLoad" accept="image/*">
                      </label>
                  </div>
                  <div class="upload-image" bis_skin_checked="1">
                      <label for="photoLoad1" class="uploadLabel">
                          <i class="icon-Group4"></i>
                          <span>Add a Photo</span>
                          <input type="file" formControlName="photo2" id="photoLoad1" class="photoLoad" accept="image/*">
                      </label>
                  </div>
                  <div class="upload-image" bis_skin_checked="1">
                      <label for="photoLoad2" class="uploadLabel">
                          <i class="icon-Group4"></i>
                          <span>Add a Photo</span>
                          <input type="file" formControlName="photo3" id="photoLoad2" class="photoLoad" accept="image/*">
                      </label>
                  </div>
                  <div class="upload-image" bis_skin_checked="1">
                      <label for="photoLoad3" class="uploadLabel">
                          <i class="icon-Group4"></i>
                          <span>Add a Photo</span>
                          <input type="file" formControlName="photo4" id="photoLoad3" class="photoLoad" accept="image/*">
                      </label>
                  </div>
                  <div class="upload-image" bis_skin_checked="1">
                      <label for="photoLoad4" class="uploadLabel">
                          <i class="icon-Group4"></i>
                          <span>Add a Photo</span>
                          <input type="file" formControlName="photo5" id="photoLoad4" class="photoLoad" accept="image/*">
                      </label>
                  </div>
              </div>
              <p class="one-photo text-red">*You must upload at least one photo</p>
          </fieldset>
          <fieldset id="video" class="pd-bg">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  <h3 class="title">Add Video</h3>
              </div>
              <div class="form-group" bis_skin_checked="1">
                  <div class="group-video" bis_skin_checked="1">
                      <input type="url" id="link-video"  formControlName="video" placeholder="Www.youtube.com/mehedii mohammad" required="">
                  </div>
              </div>
          </fieldset>
          <fieldset id="file-attachment" class="pd-bg">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  <h3 class="title">Attachment / VIN Report</h3>
              </div>
              <div class="upload-image" bis_skin_checked="1">
                  <label for="photoLoad-vin" class="uploadLabel">
                      <i class="icon-Group4"></i>
                      <span>Add a Photo</span>
                      <input type="file" formControlName="VINReport" id="photoLoad-vin" class="photoLoad" accept="image/*">
                  </label>
              </div>
          </fieldset>
        
      
          <fieldset>
              <button type="submit" class="button-save-listing" style="margin-bottom: 25px; float: right">Update media </button>
          </fieldset></form>
      </div>
      
      
       </mat-tab>


    <mat-tab label="Location" > 
      <div class="container mt-4" *ngIf="!editView.location">
        <mat-card class="p-3">
          <mat-card-title>Location Details</mat-card-title>
          <mat-divider></mat-divider>
      
          <div class="row mt-3">
            <div class="col-md-6">
              <div class="location-box p-3 rounded">
                <b class="text-muted">Location:</b>
                <span class="fw-bold">Vijay Nagar</span>
              </div>
            </div>
            <div class="col-md-6">
              <div class="location-box p-3 rounded">
                <b class="text-muted">City:</b>
                <span class="fw-bold">Indore</span>
              </div>
            </div>
          </div>
         
          <mat-divider class="mt-3"></mat-divider>
      
          <div class="d-flex justify-content-end mt-4">
            <button mat-raised-button color="primary" class="px-4 py-2" (click)="editLocation()" >Edit Location</button>
          </div>
        </mat-card>
      </div>
      <div *ngIf="editView.location">
        <form action="/" id="submit-add-cart" class="form-add-cart needs-validation" novalidate="" [formGroup]="carlistingFormAddress" (ngSubmit)="onCarEditFormSubmit(carlistingFormAddress,5)">
         
          <fieldset id="location" class="pd-bg mb-60">
              <div class="inner-title mb-30" bis_skin_checked="1">
                  
                  <h3 class="title">Add Your location</h3>
              </div>
              <p class="location mb-20">*Note: Just type the address into the search bar in the
                  upper-right corner of the map below, then press the Enter key.</p>
              <div class="form-group" bis_skin_checked="1">
                  <label>Full Address</label>
                  <div class="group-select" bis_skin_checked="1">
                      <input type="text" id="address" placeholder="Enter Full Address" required="" formControlName="address">
                  </div>
              </div>
              <div class="form-group" bis_skin_checked="1">
                  <label>City Name</label>
                  <div class="group-map-address-field" bis_skin_checked="1">
                      <input class="address-searching " id="address-searching" type="text" value="" aria-invalid="false" formControlName="cityName">
                      <button type="button" class="button-location">
                          <i class="icon-search-1"></i>
                      </button>
                  </div>
              </div>
          </fieldset>
          <fieldset>
              <button type="submit" class="button-save-listing" style="margin-bottom: 25px; float: right">Update location</button>
          </fieldset>
      </form>
      </div>
      
          </mat-tab>

    
  </mat-tab-group>
</div>

<div class="dialog-container" *ngIf="data.type=='addCarSuccess'">
  <h2>ðŸŽ‰ Congratulations!</h2>
  <p>Your car is added successfully.</p>
  <button mat-button color="primary" (click)="closeDialog()">OK</button>
</div>

<div class="dialog-container" *ngIf="data.type=='addCarSuccess'">
  <p>Are you want to approve this test drive ?</p>
  <button mat-button color="primary" (click)="approveTestDrive()">Yes</button>
  <button mat-button color="primary" (click)="closeDialog()">Back</button>
</div>